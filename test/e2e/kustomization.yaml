apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Set namespace for all resources
namespace: sbd-operator-system

resources:
- ../../config/openshift-default
- ../../config/webhook  # Enable webhook configuration

#images:
#- name: controller:latest
#  newName: quay.io/medik8s/sbd-operator
#  newTag: latest

patches:
- path: image-pull-policy-patch.yaml
  target:
    kind: Deployment
    name: controller-manager
# [WEBHOOK] Enable webhook patch - local file to avoid kustomize security restrictions
- path: webhook-patch.yaml
  target:
    kind: Deployment
    name: controller-manager
